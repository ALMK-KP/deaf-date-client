@if (store.tracks().length) {
  <div cdkDropListGroup>
    <ul
      cdkDropList
      class="pt-2 text-white text-sm gap-2 flex flex-col"
      [cdkDropListData]="store.tracks()"
      (cdkDropListDropped)="drop($event)"
    >
      @for (track of store.tracks(); track track.id; let i = $index) {
        <app-track-list-item [track]="track" [orderId]="i" />
      }
      @if (store.isAddingTrackLoading()) {
        <li class="flex py-2 px-9 gap-3">
          <div
            class="flex-shrink-0 w-[40px] h-[40px] rounded-lg ml-[22px]"
            [tuiSkeleton]="true"
          ></div>
          <div class="rounded-lg grow" [tuiSkeleton]="true"></div>
        </li>
      }
    </ul>
  </div>
}

@if (!store.tracks().length && store.isLoading()) {
  <div class="grow flex items-center justify-center mt-8">
    <div class="loader-thin"></div>
  </div>
}

@if (!store.tracks().length && !store.isLoading()) {
  <p class="text-center italic pt-24 pb-20">
    {{
      isMode(viewModeEnum.CREATION)
        ? "No tracks added yet"
        : "Playlist doesn't exist"
    }}
  </p>
}

<app-player *appAttachTo="'playerContainer'" />

<app-track-context-menu-dialog />
